<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Plant Focus</title>

  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}?v=2">
</head>
<body class="{% if session.get('theme') == 'dark' %}dark-mode{% endif %}">


  <div class="container">

    <!-- HEADER -->
<div class="card header">
  <h1>ğŸŒ¿ Welcome back</h1>
  <p class="subtitle">Letâ€™s grow something today.</p>
  <div class="streak">ğŸ”¥ Streak: {{ streak }}</div>

 <div class="nav-links">
  <a href="{{ url_for('stats') }}" class="nav-button">ğŸ“Š Stats</a>
  <a href="{{ url_for('logout') }}" class="nav-button">ğŸšª Logout</a>
  <form method="POST" action="{{ url_for('toggle_theme') }}">
    <button type="submit" class="nav-button">
      {% if session.get('theme') == 'dark' %}
        â˜€ï¸
      {% else %}
        ğŸŒ™
      {% endif %}
    </button>
  </form>
</div>

</div>

    <!-- PLANT -->
    <div class="card">
      <h2>Your Plant</h2>
      <div class="plant-wrapper">
        <div class="plant">
 	   {% if plant.stage == 0 %}ğŸŒ°
  	   {% elif plant.stage == 1 %}ğŸŒ±
           {% elif plant.stage == 2 %}ğŸŒ¿
           {% elif plant.stage == 3 %}ğŸŒ¸
           {% endif %}
        </div>

      </div>
      <div class="progress-bar">
        <div class="progress" style="width: {{ progress }}%"></div>
      </div>
      <p class="progress-text">{{ progress }}% grown</p>
    </div>

<div class="card">
  <h2>Your Garden</h2>

  {% if history %}
    <div class="plant-history">
      {% for p in history %}
        <div class="flower">ğŸŒ¸</div>
      {% endfor %}
    </div>
  {% else %}
    <p class="subtitle">Your first flower is on its way ğŸŒ±</p>
  {% endif %}
</div>



<!-- TIMER -->

<div class="card timer-card">
  <h2>â± Focus Timer</h2>

  <div class="timer-settings">
    <div class="timer-input">
      <label>Work</label>
      <input type="number" id="work-time" value="25" min="1"> min
    </div>
    <div class="timer-input">
      <label>Break</label>
      <input type="number" id="break-time" value="5" min="1"> min
    </div>
  </div>

  <div id="timer-display" class="timer-display">25:00</div>

  <div class="timer-buttons">
    <button class="timer-btn" onclick="startTimer('work')">â–¶ Work</button>
    <button class="timer-btn" onclick="startTimer('break')">â˜• Break</button>
    <button class="timer-btn" onclick="stopTimer()">â¸ Pause</button>
    <button class="timer-btn" onclick="resetTimer()">ğŸ”„ Reset</button>
  </div>
</div>

<div class="focus-meter">
  <div class="focus-text">
    Focus Meter: {{ completed_tasks }} / {{ total_tasks }} tasks
  </div>

  <div class="meter-bg">
    <div class="meter-fill" style="width: {{ progress }}%;"></div>
  </div>
</div>


    <!-- TASKS -->
<div class="card">
  <h2>Your Tasks</h2>

<form action="{{ url_for('add_task') }}" method="POST" class="task-form">
  <input type="text" name="title" placeholder="New task..." required>

  <select name="priority" class="priority-select">
    <option value="high">ğŸ”¥ High</option>
    <option value="medium" selected>ğŸŒ¿ Medium</option>
    <option value="low">ğŸ’§ Low</option>
  </select>

  <button type="submit">â•</button>
</form>

{% for task in tasks %}
<div class="task-row">
  <form action="{{ url_for('complete_task', task_id=task.id) }}" method="POST">
    <label class="task {{ task.priority }} {% if task.completed %}completed{% endif %}">
      <input type="checkbox"
             onchange="this.form.submit()"
             {% if task.completed %}checked{% endif %}>
      <span>{{ task.title }}</span>
    </label>
  </form>

  <form action="{{ url_for('delete_task', task_id=task.id) }}" method="POST" class="delete-form">
    <button type="submit" class="delete-task">âœ–</button>
  </form>
</div>
{% endfor %}

</div>

  </div>

<script src="{{ url_for('static', filename='timer.js') }}"></script>
</body>
</html>


